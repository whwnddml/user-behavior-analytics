# ì°¨íŠ¸ ì„¤ëª… ë¬¸ì„œ

## ê°œìš”
ì‚¬ìš©ìž í–‰ë™ ë¶„ì„ ëŒ€ì‹œë³´ë“œì˜ ê° ì°¨íŠ¸ì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ê³¼ ë°ì´í„° í•´ì„ ë°©ë²•ì„ ì •ë¦¬í•œ ë¬¸ì„œìž…ë‹ˆë‹¤.

---

## 1. ì˜ì—­ë³„ í‰ê·  ì²´ë¥˜ì‹œê°„ (Bar Chart)

### ðŸ“Š ì°¨íŠ¸ ìœ í˜•
- **íƒ€ìž…**: ì„¸ë¡œ ë§‰ëŒ€ ì°¨íŠ¸ (Bar Chart)
- **ìœ„ì¹˜**: ëŒ€ì‹œë³´ë“œ ì¢Œìƒë‹¨

### ðŸ“ˆ ë°ì´í„° ì„¤ëª…
- **ì§‘ê³„ ë°©ì‹**: ì„ íƒëœ ê¸°ê°„ ë‚´ ê° ì˜ì—­ì˜ í‰ê·  ì²´ë¥˜ì‹œê°„
- **ë‹¨ìœ„**: ì´ˆ (ìžë™ìœ¼ë¡œ ì´ˆ/ë¶„/ì‹œê°„ ë‹¨ìœ„ë¡œ í‘œì‹œ)
- **ë°ì´í„° ì†ŒìŠ¤**: `area_engagements` í…Œì´ë¸”ì˜ `time_spent` í•„ë“œ

### ðŸ” SQL ì¿¼ë¦¬ ë¡œì§
```sql
SELECT 
    ae.area_name,
    AVG(ae.time_spent) as avg_time_spent
FROM area_engagements ae
JOIN pageviews p ON ae.pageview_id = p.pageview_id
JOIN sessions s ON p.session_id = s.session_id
WHERE s.start_time >= startDate AND s.start_time <= endDate
GROUP BY ae.area_name
ORDER BY total_time_spent DESC
```

### ðŸ“‹ í•´ì„ ë°©ë²•
- **ë†’ì€ ê°’**: ì‚¬ìš©ìžê°€ í•´ë‹¹ ì˜ì—­ì— ì˜¤ëž˜ ë¨¸ë¬´ë¦„ (ê´€ì‹¬ë„ ë†’ìŒ)
- **ë‚®ì€ ê°’**: ì‚¬ìš©ìžê°€ í•´ë‹¹ ì˜ì—­ì„ ë¹ ë¥´ê²Œ ì§€ë‚˜ê° (ê´€ì‹¬ë„ ë‚®ìŒ)
- **ì •ë ¬**: ì´ ì²´ë¥˜ì‹œê°„ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ

### âš ï¸ ì£¼ì˜ì‚¬í•­
- ì˜ì—­ì´ í™”ë©´ì— ë³´ì´ëŠ” ì‹œê°„ë§Œ ì¸¡ì • (ìŠ¤í¬ë¡¤ë¡œ ë²—ì–´ë‚˜ë©´ ì¤‘ë‹¨)
- íƒ­ ì „í™˜ì´ë‚˜ ì°½ ìµœì†Œí™” ì‹œì—ëŠ” ì¸¡ì •ë˜ì§€ ì•ŠìŒ
- ë§¤ìš° ê¸´ ì²´ë¥˜ì‹œê°„ì€ ì‚¬ìš©ìžê°€ íŽ˜ì´ì§€ë¥¼ ì—´ì–´ë‘” ì±„ ìžë¦¬ë¥¼ ë¹„ì› ì„ ê°€ëŠ¥ì„±

---

## 2. ë””ë°”ì´ìŠ¤ë³„ ì‚¬ìš©ìž ë¶„í¬ (Pie Chart)

### ðŸ“Š ì°¨íŠ¸ ìœ í˜•
- **íƒ€ìž…**: íŒŒì´ ì°¨íŠ¸ (Pie Chart)
- **ìœ„ì¹˜**: ëŒ€ì‹œë³´ë“œ ìš°ìƒë‹¨

### ðŸ“ˆ ë°ì´í„° ì„¤ëª…
- **ì§‘ê³„ ë°©ì‹**: ì„ íƒëœ ê¸°ê°„ ë‚´ ë””ë°”ì´ìŠ¤ íƒ€ìž…ë³„ ì„¸ì…˜ ìˆ˜
- **ë‹¨ìœ„**: ì„¸ì…˜ ìˆ˜ (ê°œ)
- **ë°ì´í„° ì†ŒìŠ¤**: `sessions` í…Œì´ë¸”ì˜ `user_agent` í•„ë“œ ë¶„ì„

### ðŸ” SQL ì¿¼ë¦¬ ë¡œì§
```sql
SELECT 
    CASE 
        WHEN s.user_agent LIKE '%Mobile%' THEN 'mobile'
        WHEN s.user_agent LIKE '%Tablet%' THEN 'tablet'
        ELSE 'desktop'
    END as device_type,
    COUNT(DISTINCT s.session_id) as session_count
FROM sessions s
WHERE s.start_time >= startDate AND s.start_time <= endDate
GROUP BY device_type
ORDER BY session_count DESC
```

### ðŸ“‹ í•´ì„ ë°©ë²•
- **Mobile**: ëª¨ë°”ì¼ ê¸°ê¸°ì—ì„œì˜ ì ‘ì†
- **Desktop**: ë°ìŠ¤í¬í†±/ë…¸íŠ¸ë¶ì—ì„œì˜ ì ‘ì†
- **Tablet**: íƒœë¸”ë¦¿ì—ì„œì˜ ì ‘ì†
- **ë¹„ìœ¨**: ì „ì²´ ì„¸ì…˜ ëŒ€ë¹„ ê° ë””ë°”ì´ìŠ¤ì˜ ì‚¬ìš© ë¹„ìœ¨

### âš ï¸ ì£¼ì˜ì‚¬í•­
- User-Agent ë¬¸ìžì—´ ê¸°ë°˜ íŒë³„ë¡œ 100% ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìžˆìŒ
- ì¼ë¶€ ë¸Œë¼ìš°ì €ëŠ” User-Agentë¥¼ ì¡°ìž‘í•  ìˆ˜ ìžˆìŒ

---

## 3. ë¸Œë¼ìš°ì €ë³„ ì‚¬ìš©ìž ë¶„í¬ (Pie Chart)

### ðŸ“Š ì°¨íŠ¸ ìœ í˜•
- **íƒ€ìž…**: íŒŒì´ ì°¨íŠ¸ (Pie Chart)
- **ìœ„ì¹˜**: ëŒ€ì‹œë³´ë“œ ìš°í•˜ë‹¨

### ðŸ“ˆ ë°ì´í„° ì„¤ëª…
- **ì§‘ê³„ ë°©ì‹**: ì„ íƒëœ ê¸°ê°„ ë‚´ ë¸Œë¼ìš°ì €ë³„ ì„¸ì…˜ ìˆ˜
- **ë‹¨ìœ„**: ì„¸ì…˜ ìˆ˜ (ê°œ)
- **ë°ì´í„° ì†ŒìŠ¤**: `sessions` í…Œì´ë¸”ì˜ `user_agent` í•„ë“œ ë¶„ì„

### ðŸ” SQL ì¿¼ë¦¬ ë¡œì§
```sql
WITH browser_info AS (
    SELECT 
        CASE 
            WHEN s.user_agent LIKE '%Chrome%' THEN 'Chrome'
            WHEN s.user_agent LIKE '%Firefox%' THEN 'Firefox'
            WHEN s.user_agent LIKE '%Safari%' THEN 'Safari'
            WHEN s.user_agent LIKE '%Edge%' THEN 'Edge'
            ELSE 'Other'
        END as browser,
        REGEXP_REPLACE(
            SUBSTRING(s.user_agent FROM 'BrowserName/([0-9]+)'),
            '[^0-9]', '', 'g'
        ) as version,
        s.session_id
    FROM sessions s
    WHERE s.start_time >= startDate AND s.start_time <= endDate
)
SELECT browser, version, COUNT(DISTINCT session_id) as session_count
FROM browser_info
GROUP BY browser, version
ORDER BY session_count DESC
```

### ðŸ“‹ í•´ì„ ë°©ë²•
- **Chrome, Firefox, Safari, Edge**: ì£¼ìš” ë¸Œë¼ìš°ì €ë³„ ì‚¬ìš© í˜„í™©
- **Other**: ê¸°íƒ€ ë¸Œë¼ìš°ì € (Opera, ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € ë“±)
- **ë²„ì „**: ë¸Œë¼ìš°ì € ë©”ì´ì € ë²„ì „ í‘œì‹œ
- **ì •ë ¬**: ì„¸ì…˜ ìˆ˜ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ

### âš ï¸ ì£¼ì˜ì‚¬í•­
- User-Agent ë¬¸ìžì—´ ê¸°ë°˜ íŒë³„
- ë²„ì „ ì •ë³´ê°€ ì •í™•í•˜ì§€ ì•Šì„ ìˆ˜ ìžˆìŒ ('unknown'ìœ¼ë¡œ í‘œì‹œ)
- ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ëŠ” 'Other'ë¡œ ë¶„ë¥˜ë  ìˆ˜ ìžˆìŒ

---

## 4. ì‹œê°„ëŒ€ë³„ í™œë™ëŸ‰ (Line Chart)

### ðŸ“Š ì°¨íŠ¸ ìœ í˜•
- **íƒ€ìž…**: êº¾ì€ì„  ì°¨íŠ¸ (Line Chart)
- **ìœ„ì¹˜**: ëŒ€ì‹œë³´ë“œ ì¢Œí•˜ë‹¨

### ðŸ“ˆ ë°ì´í„° ì„¤ëª…
- **ì§‘ê³„ ë°©ì‹**: ì„ íƒëœ ê¸°ê°„ ë‚´ ì‹œê°„ëŒ€ë³„ ì´ ì„¸ì…˜ ìˆ˜
- **ë‹¨ìœ„**: ì„¸ì…˜ ìˆ˜ (ê°œ)
- **ì‹œê°„ ë²”ìœ„**: 0ì‹œ~23ì‹œ (24ì‹œê°„)
- **ë°ì´í„° ì†ŒìŠ¤**: `sessions` í…Œì´ë¸”ì˜ `start_time` í•„ë“œ

### ðŸ” SQL ì¿¼ë¦¬ ë¡œì§
```sql
SELECT 
    EXTRACT(HOUR FROM s.start_time) as hour,
    COUNT(DISTINCT s.session_id) as session_count,
    COUNT(DISTINCT p.pageview_id) as pageview_count
FROM sessions s
LEFT JOIN pageviews p ON s.session_id = p.session_id
WHERE s.start_time >= startDate AND s.start_time <= endDate
GROUP BY EXTRACT(HOUR FROM s.start_time)
ORDER BY hour
```

### ðŸ“‹ í•´ì„ ë°©ë²•
- **Xì¶•**: ì‹œê°„ëŒ€ (0ì‹œ~23ì‹œ)
- **Yì¶•**: í•´ë‹¹ ì‹œê°„ëŒ€ì— ì‹œìž‘ëœ ì„¸ì…˜ ìˆ˜
- **íŒ¨í„´ ë¶„ì„**: 
  - í”¼í¬ ì‹œê°„ëŒ€: ì‚¬ìš©ìž í™œë™ì´ ê°€ìž¥ í™œë°œí•œ ì‹œê°„
  - ì €í™œë™ ì‹œê°„ëŒ€: ì‚¬ìš©ìž í™œë™ì´ ì ì€ ì‹œê°„
  - ì—…ë¬´ì‹œê°„ vs ì—¬ê°€ì‹œê°„ íŒ¨í„´ íŒŒì•… ê°€ëŠ¥

### âš ï¸ ì£¼ì˜ì‚¬í•­
- **ëˆ„ì  ë°ì´í„°**: ì„ íƒ ê¸°ê°„ ë‚´ ëª¨ë“  ë‚ ì§œì˜ ì‹œê°„ëŒ€ë³„ í•©ê³„
- **í‰ê· ì´ ì•„ë‹˜**: ì¼í‰ê· ì´ ì•„ë‹Œ ì „ì²´ ê¸°ê°„ì˜ ì´í•©
- **ì‹œê°„ëŒ€**: ì„œë²„ ì‹œê°„ ê¸°ì¤€ (UTC ë˜ëŠ” ë¡œì»¬ ì‹œê°„ í™•ì¸ í•„ìš”)
- **ì„¸ì…˜ ì‹œìž‘ ì‹œê°„ ê¸°ì¤€**: ì„¸ì…˜ì´ ëë‚œ ì‹œê°„ì´ ì•„ë‹Œ ì‹œìž‘ëœ ì‹œê°„ ê¸°ì¤€

### ðŸ’¡ í™œìš© ì˜ˆì‹œ
- 7ì¼ê°„ ì¡°íšŒ ì‹œ: 7ì¼ ë™ì•ˆ ê° ì‹œê°„ëŒ€ë³„ ì´ ì„¸ì…˜ ìˆ˜
- ì˜ˆ: "14ì‹œ"ì— 35ê°œ â†’ 7ì¼ ë™ì•ˆ 14:00~14:59ì— ì‹œìž‘ëœ ì„¸ì…˜ì´ ì´ 35ê°œ

---

## 5. í†µê³„ ì¹´ë“œ (Overview Stats)

### ðŸ“Š ì¹´ë“œ ìœ í˜•
- **ìœ„ì¹˜**: ëŒ€ì‹œë³´ë“œ ìƒë‹¨ 4ê°œ ì¹´ë“œ

### ðŸ“ˆ ê° ì¹´ë“œ ì„¤ëª…

#### 5.1 ì´ ì„¸ì…˜
- **ì„¤ëª…**: ì„ íƒ ê¸°ê°„ ë‚´ ê³ ìœ  ì„¸ì…˜ ìˆ˜
- **ê³„ì‚°**: `COUNT(DISTINCT session_id)`
- **ì˜ë¯¸**: ì‚¬ì´íŠ¸ ë°©ë¬¸ íšŸìˆ˜

#### 5.2 ì´ íŽ˜ì´ì§€ë·°
- **ì„¤ëª…**: ì„ íƒ ê¸°ê°„ ë‚´ ì´ íŽ˜ì´ì§€ ì¡°íšŒ ìˆ˜
- **ê³„ì‚°**: `COUNT(DISTINCT pageview_id)`
- **ì˜ë¯¸**: íŽ˜ì´ì§€ê°€ ë¡œë“œëœ ì´ íšŸìˆ˜

#### 5.3 ì´ í´ë¦­ìˆ˜
- **ì„¤ëª…**: ì„ íƒ ê¸°ê°„ ë‚´ ì´ ìƒí˜¸ìž‘ìš© ìˆ˜
- **ê³„ì‚°**: `COUNT(DISTINCT interaction_id)`
- **ì˜ë¯¸**: ì‚¬ìš©ìžê°€ í´ë¦­/í„°ì¹˜í•œ ì´ íšŸìˆ˜

#### 5.4 í‰ê·  ì„¸ì…˜ ì‹œê°„
- **ì„¤ëª…**: ì„¸ì…˜ë‹¹ í‰ê·  ì§€ì† ì‹œê°„
- **ê³„ì‚°**: `AVG(end_time - start_time)`
- **ë‹¨ìœ„**: ìžë™ ë³€í™˜ (ì´ˆ/ë¶„/ì‹œê°„)
- **ì˜ë¯¸**: ì‚¬ìš©ìžê°€ í‰ê· ì ìœ¼ë¡œ ì‚¬ì´íŠ¸ì— ë¨¸ë¬´ëŠ” ì‹œê°„

---

## 6. ìµœê·¼ ì„¸ì…˜ í…Œì´ë¸”

### ðŸ“Š í…Œì´ë¸” êµ¬ì„±
- **ìœ„ì¹˜**: ëŒ€ì‹œë³´ë“œ í•˜ë‹¨
- **í–‰ ìˆ˜**: ìµœëŒ€ 10ê°œ ì„¸ì…˜

### ðŸ“ˆ ì»¬ëŸ¼ ì„¤ëª…

| ì»¬ëŸ¼ | ì„¤ëª… | ë°ì´í„° ì†ŒìŠ¤ |
|------|------|-------------|
| ì„¸ì…˜ ID | ì„¸ì…˜ ê³ ìœ  ì‹ë³„ìž (ì•ž 8ìžë¦¬ë§Œ í‘œì‹œ) | `sessions.session_id` |
| ì‹œìž‘ ì‹œê°„ | ì„¸ì…˜ ì‹œìž‘ ì‹œê°„ | `sessions.start_time` |
| ë””ë°”ì´ìŠ¤ | ì ‘ì† ë””ë°”ì´ìŠ¤ íƒ€ìž… | `sessions.user_agent` ë¶„ì„ |
| ë¸Œë¼ìš°ì € | ë¸Œë¼ìš°ì € ì´ë¦„ ë° ë²„ì „ | `sessions.user_agent` ë¶„ì„ |
| íŽ˜ì´ì§€ë·° | í•´ë‹¹ ì„¸ì…˜ì˜ íŽ˜ì´ì§€ ì¡°íšŒ ìˆ˜ | `COUNT(pageviews)` |
| í´ë¦­ìˆ˜ | í•´ë‹¹ ì„¸ì…˜ì˜ ìƒí˜¸ìž‘ìš© ìˆ˜ | `COUNT(interactions)` |

### ðŸ“‹ ì •ë ¬ ê¸°ì¤€
- **ê¸°ë³¸ ì •ë ¬**: ì‹œìž‘ ì‹œê°„ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ (ìµœì‹  ì„¸ì…˜ì´ ìœ„ì—)

---

## 7. í•„í„° ê¸°ëŠ¥

### ðŸ“… ë‚ ì§œ í•„í„°
- **ê¸°ë³¸ê°’**: ìµœê·¼ 7ì¼
- **ë²”ìœ„**: ì‹œìž‘ì¼ ~ ì¢…ë£Œì¼
- **ì œí•œ**: ë¯¸ëž˜ ë‚ ì§œ ìž…ë ¥ ë¶ˆê°€

### ðŸ“„ íŽ˜ì´ì§€ í•„í„°
- **ì˜µì…˜**: 
  - ë©”ì¸ íŽ˜ì´ì§€ (`/index.html`)
  - ì˜ˆì‹œ íŽ˜ì´ì§€ (`/example-page.html`)
  - í…ŒìŠ¤íŠ¸ íŽ˜ì´ì§€ (`/test-frontend.html`)
  - ìŠ¤ì¹´ì´ë°¥ (`/static/html/skybab.html`)
  - ìŠ¤ì¹´ì´ë°¥[ê¹ƒí—™] (`/user-behavior-analytics/static/html/skybab.html`)

---

## 8. ë°ì´í„° ì—…ë°ì´íŠ¸ ì£¼ê¸°

### â° ì‹¤ì‹œê°„ì„±
- **ì°¨íŠ¸ ë°ì´í„°**: íŽ˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ ì‹œ ìµœì‹  ë°ì´í„° ë¡œë“œ
- **ìˆ˜ì§‘ ì£¼ê¸°**: 5ë¶„ë§ˆë‹¤ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì„œë²„ë¡œ ë°ì´í„° ì „ì†¡
- **í—¬ìŠ¤ì²´í¬**: 5ë¶„ë§ˆë‹¤ ì„œë²„ ìƒíƒœ í™•ì¸

### ðŸ”„ ìºì‹±
- **í´ë¼ì´ì–¸íŠ¸**: ë¸Œë¼ìš°ì € ìºì‹œ ì—†ìŒ (ì‹¤ì‹œê°„ ë°ì´í„°)
- **ì„œë²„**: ë°ì´í„°ë² ì´ìŠ¤ ì§ì ‘ ì¡°íšŒ

---

## 9. ë¬¸ì œ í•´ê²°

### ðŸš¨ ì¼ë°˜ì ì¸ ë¬¸ì œ

#### ì°¨íŠ¸ê°€ í‘œì‹œë˜ì§€ ì•ŠëŠ” ê²½ìš°
1. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ JavaScript ì˜¤ë¥˜ í™•ì¸
2. ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ API ì‘ë‹µ í™•ì¸
3. ë‚ ì§œ ë²”ìœ„ ë‚´ ë°ì´í„° ì¡´ìž¬ ì—¬ë¶€ í™•ì¸

#### "ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤" í‘œì‹œ
1. ì„ íƒí•œ ë‚ ì§œ ë²”ìœ„ í™•ì¸
2. íŽ˜ì´ì§€ í•„í„° ì„¤ì • í™•ì¸
3. ì‹¤ì œ ì‚¬ìš©ìž í™œë™ ë°ì´í„° ì¡´ìž¬ ì—¬ë¶€ í™•ì¸

#### ì°¨íŠ¸ ë ˆì´ë¸”ì´ "undefined"ë¡œ í‘œì‹œ
1. API ì‘ë‹µ êµ¬ì¡° í™•ì¸
2. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ë””ë²„ê¹… ë¡œê·¸ í™•ì¸
3. í•„ë“œëª… ë§¤í•‘ í™•ì¸

---

## 10. ê°œë°œìž ì°¸ê³ ì‚¬í•­

### ðŸ› ï¸ ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬**: Chart.js
- **ë²„ì „**: ìµœì‹  CDN ë²„ì „
- **ì´ˆê¸°í™” ìœ„ì¹˜**: `frontend/js/analytics.js`

### ðŸ“ ì½”ë“œ ìœ„ì¹˜
- **í”„ë¡ íŠ¸ì—”ë“œ**: `frontend/js/analytics.js`
- **ë°±ì—”ë“œ**: `backend/src/models/analytics.ts`
- **HTML**: `frontend/analytics-dashboard.html`

### ðŸ”§ ìˆ˜ì • ì‹œ ì£¼ì˜ì‚¬í•­
1. ì°¨íŠ¸ ì´ˆê¸°í™”ëŠ” ë°˜ë“œì‹œ DOMContentLoaded ì´ë²¤íŠ¸ í›„
2. API ì‘ë‹µ êµ¬ì¡° ë³€ê²½ ì‹œ í”„ë¡ íŠ¸ì—”ë“œ ë§¤í•‘ í™•ì¸
3. ìƒˆë¡œìš´ ì°¨íŠ¸ ì¶”ê°€ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ ë° ê¸°ë³¸ê°’ ì„¤ì • í•„ìˆ˜

---

## 11. ë²„ì „ ížˆìŠ¤í† ë¦¬

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ì‚¬í•­ |
|------|------|----------|
| 1.0 | 2025-07-12 | ì´ˆê¸° ì°¨íŠ¸ ì„¤ëª… ë¬¸ì„œ ìž‘ì„± |
| | | - 4ê°œ ì£¼ìš” ì°¨íŠ¸ ì„¤ëª… ì¶”ê°€ |
| | | - í†µê³„ ì¹´ë“œ ë° í…Œì´ë¸” ì„¤ëª… ì¶”ê°€ |
| | | - í•„í„° ê¸°ëŠ¥ ë° ë¬¸ì œ í•´ê²° ê°€ì´ë“œ ì¶”ê°€ |

---

## ðŸ“ž ë¬¸ì˜ì‚¬í•­
ì°¨íŠ¸ ê´€ë ¨ ë¬¸ì˜ë‚˜ ê°œì„ ì‚¬í•­ì´ ìžˆìœ¼ë©´ ê°œë°œíŒ€ì— ì—°ë½í•˜ê±°ë‚˜ ì´ìŠˆë¥¼ ë“±ë¡í•´ ì£¼ì„¸ìš”. 